
# 1.4.8 Certificates

### Digital Certificates
-----
- Public Key Certificates
	- `Binds a public key with a digital signature`
	- Includes other details about key holder

- Digital Signatures **add trust**
	- Use Certificate Authorities for additional trust
	- **Web Of Trust** adds additional users for additional trust
		- "A friend of a friend we can trust"

- Certificates within an Organization or Network 
	- May not always need a 3rd Part CA
	- Certificate creation can be `built into the OS`

**Standard Format: X.509**
**Certificate Details:** 
- **Serial Number, Version, Signature Algorithm, Issuer, Name of Cert Holder, Public Key...**


### Root of Trust
-----
Everything associated with IT security requires trust (fundamental characteristic)

"How can we built trust from something unknown"
- Have a 3rd party `vouch for this connection`

- Referred to as the **Root of Trust**
	- Inherently and Implicitly trusted component
	- Hardware, Software or other component
	- HSM, Secure Enclave, etc.


### Certificate Authorities
---
When you connect to a random website, how can you trust it?

**Certificate Authority (CA**) has digitally signed the website certificate
- Browser trusts the CA
- You trust the CA
- Real-time Verification


#### Third-Party CAs
------
- Built in-to your browser
- 100s of certificate Authorities that are trusted
- Companies pay the CA and become trust by your browser
- The charge comes from the authority `signing the certification, provides validation`


### Certificate Signing Requests (Example)
---
- Create a key pair, then send the public key to the CA to be signed.
	- Certificate Signing Request -> (CSR)


- CA validates the request
	- Confirms DNS emails and website ownership

- Once approved, signed with CA's private key and send it back to you



### Private Certificate Authorities
---
- You are your own CA
	- Build it in-house
	- Your devices must trust the internal CA
	- Take public certificate -> Install on everyones computer in our organization

- Everyones machine trusts the internal CA the same was it would an external CA

- Software Packages: Windows Certificate Services, Open CA


### Self-Signed Certificates
----
Internal certificates don't need to be signed by a **Public CA**
- Company is the only one going to use it
- No need to purchase trust for devices that trust you

Build your own CA
- Issue your own certificates signed by your own CA

Install the CA certificate/trusted chain on all devices
- All devices know and inherently trust because of the internal CA


#### Wildcard Certificates
-----
**Subject Alternative Name (SAN)**
- Extension to an X.509 Certificate
- Allows a certificate to support various domains

**Wildcard Domain**
- Certificates are based on the name of the server
- A wild card domain will apply to all server names with the associated domain name


### Key Revocation
----
- **Certificate Revocation List (CRL)**
	- Maintained by the Certificate Authority (CA)
	- Contains many revocations in a large file
	- Many different ways to revoke a certificate

- **Example: Heartbleed**
	- Vulnerability in the OpenSSL flaw that put the private key of web servers at risk
	- OpenSSL patched, web server certificates were replaced.



### OCSP Stapling
----
###### ðŸ“¦ Whatâ€™s the problem?
----
**Using a CRL is slow and bulky**. If 1000 people visit a website, they all have to:
- Download the CRL
- Search for the certificate
- Confirm it's valid
**That doesnâ€™t scale well.**

- **Online Certificate Status Protocol**
	- Provides **scalability** for OSCP Checks
- 
- CA is responsible for responding to all client OCSP requests
	- inefficient
- 
- Instead, have the certificate holder verify their own status
	- Status information is stored on the certificate holder's server

- OSCP Status is "stapled" into the SSL/TLS handshake
	- Digitally signed by the CA

- Browser can handle all checks for revocation

- **Alternative:** 3rd party server to provide OCSP responder via HTTP

